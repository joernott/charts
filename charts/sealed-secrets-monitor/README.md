# sealed-secrets-monitor

![Version: 0.1.1](https://img.shields.io/badge/Version-0.1.1-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.33.3](https://img.shields.io/badge/AppVersion-1.33.3-informational?style=flat-square)

Helm chart to create a job that waits for [sealed-secrets](https://github.com/bitnami-labs/sealed-secrets) to unseal.
It can be used in conjunction with [Argo CD](https://argo-cd.readthedocs.io/en/stable/) to wait not only for the
sealed secrets to be snychronized but also to be unsealed.

## Usage

### Variant a

Deploy this helm chart as a sub chart alongside the sealed secrets you want to monitor.

### Variant b
Use the value extraObjects to include the sealed secrets and deploy this chart:
```
cat *.sealed-secret.yaml | yq ea '[.] | {"extraObjects": . }' >sealed-secrets-monitor-custom-values.yaml
helm repo add joernott https://joernott.github.io/charts --force-update
    helm install \
    sealed-secrets-monitor joernott/sealed-secrets-monitor \
    --namespace "myapp" \
    --create-namespace \
    --version "{{ template "chart.version" . }}" \
    -f "sealed-secrets-monitor-custom-values.yaml"
```

**Homepage:** <https://github.com/joernott/charts/tree/main/charts/sealed-secrets-monitor>

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| joernott | <joernott@users.noreply.github.com> |  |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| configMap.annotations | object | `{}` | Annotations to add to the config map |
| configMap.name | string | a name is generated using the fullname template | The name of the config map storing the env var and script. |
| extraObjects | list | `[]` | Array of extra K8s manifests to deploy # Note: Supports use of custom Helm templates |
| fullnameOverride | string | `""` |  |
| image.hash | string | `"sha256:cd354d5b25562b195b277125439c23e4046902d7f1abc0dc3c75aad04d298c17"` | Hash of the specific container image for that version |
| image.pullPolicy | string | `"IfNotPresent"` |  |
| image.repository | string | `"docker.io/bitnami/kubectl"` | Container image containing kubectl |
| image.tag | string | `"1.33.3"` | Version of the container image containing kubectl |
| imagePullSecrets | list | `[]` |  |
| job.annotations | object | `{}` | Annotations to add to the config map |
| job.name | string | a name is generated using the fullname template | The name of the monitoring job waiting for sealed secrets to unpack. |
| nameOverride | string | `""` |  |
| resources | object | `{}` |  |
| role.annotations | object | `{}` | Annotations to add to the config map |
| role.name | string | a name is generated using the fullname template | The name of the role granted top the service account. |
| roleBinding.annotations | object | `{}` | Annotations to add to the config map |
| roleBinding.name | string | a name is generated using the fullname template | The name of the role binding specifying the permissions needed by the monitoring job. |
| securityContext.allowPrivilegeEscalation | bool | `false` |  |
| securityContext.capabilities.drop[0] | string | `"ALL"` |  |
| securityContext.privileged | bool | `false` |  |
| securityContext.readOnlyRootFilesystem | bool | `true` |  |
| securityContext.runAsGroup | int | `1000` |  |
| securityContext.runAsNonRoot | bool | `true` |  |
| securityContext.runAsUser | int | `1000` |  |
| securityContext.seLinuxOptions | string | `nil` |  |
| securityContext.seccompProfile.type | string | `"RuntimeDefault"` |  |
| serviceAccount.annotations | object | `{}` | Annotations to add to the service account |
| serviceAccount.automount | bool | `true` |  |
| serviceAccount.create | bool | `true` | Specifies whether a service account should be created |
| serviceAccount.name | string | a name is generated using the fullname template | The name of the service account used for the monitoring job. |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
